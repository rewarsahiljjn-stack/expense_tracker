{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<h2>Expense Dashboard</h2>
<div class="summary">
    <h3>Total Expenses: ${{ "%.2f"|format(total) }}</h3>
    <h3>Total Income: ${{ "%.2f"|format(total_income) }}</h3>
    <h3>Net Savings: ${{ "%.2f"|format(net_savings) }}</h3>
</div>
<div class="charts" style="display: flex; justify-content: center; flex-wrap: wrap; gap: 20px;">
    <div class="chart-container" style="flex: 1 1 300px; max-width: 400px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
        <h3>Expenses by Category</h3>
        <canvas id="categoryChart"></canvas>
    </div>
    <div class="chart-container" style="flex: 1 1 300px; max-width: 400px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
        <h3>Monthly Expenses</h3>
        <canvas id="monthlyChart"></canvas>
    </div>
    <div class="chart-container" style="flex: 1 1 300px; max-width: 400px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
        <h3>Income by Source</h3>
        <canvas id="incomeCategoryChart"></canvas>
    </div>
    <div class="chart-container" style="flex: 1 1 300px; max-width: 400px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
        <h3>Monthly Income</h3>
        <canvas id="monthlyIncomeChart"></canvas>
    </div>
</div>
<script type="application/json" id="categoryData">
    {{ categories|tojson }}
</script>
<script type="application/json" id="monthlyData">
    {{ monthly|tojson }}
</script>
<script type="application/json" id="incomeCategoryData">
    {{ income_categories|tojson }}
</script>
<script type="application/json" id="monthlyIncomeData">
    {{ monthly_income|tojson }}
</script>
{% endblock %}
